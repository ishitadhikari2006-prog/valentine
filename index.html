<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Valentine Game</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:Arial,sans-serif;
  background:#fff;
  overflow:hidden;
}

/* screens */
.screen{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}
.hidden{display:none;}

h1{margin-bottom:20px;text-align:center;}

button{
  padding:12px 20px;
  font-size:18px;
  margin:10px;
}

/* game */
#game{
  background:#f5f5f5;
}

#jerry{
  position:absolute;
  bottom:20px;
  left:50px;
  width:60px;
}

.obstacle{
  position:absolute;
  bottom:20px;
  right:-60px;
  width:50px;
}

/* video */
#introVideo{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  display:none;
  background:#000;
}
</style>
</head>

<body>

<!-- START SCREEN -->
<div id="start" class="screen">
  <h1>Do you accept your bf is always right? ðŸ˜Œ</h1>
  <div>
    <button id="yesBtn">YES</button>
    <button id="noBtn">NO</button>
  </div>
</div>

<!-- VIDEO -->
<video id="introVideo" src="video.mp4"></video>

<!-- GAME -->
<div id="game" class="screen hidden">
  <img id="jerry" src="jerry.png">
</div>

<!-- END -->
<div id="end" class="screen hidden">
  <h1>You lost ðŸ˜¢</h1>
  <button onclick="location.reload()">Restart</button>
</div>

<!-- AUDIO -->
<audio id="gameMusic" src="song.mp3" loop></audio>

<script>
const start = document.getElementById("start");
const game = document.getElementById("game");
const end = document.getElementById("end");

const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");

const introVideo = document.getElementById("introVideo");
const gameMusic = document.getElementById("gameMusic");

let noCount = 0;
let playing = false;

/* YES CLICK */
yesBtn.addEventListener("click", () => {
  startVideo();
});

/* NO CLICK */
noBtn.addEventListener("click", () => {
  noCount++;

  // random move
  noBtn.style.position = "absolute";
  noBtn.style.left = Math.random()*70 + "%";
  noBtn.style.top = Math.random()*70 + "%";

  if(noCount === 14){
    startVideo();
  }
});

/* VIDEO FLOW */
function startVideo(){
  start.classList.add("hidden");
  introVideo.style.display = "block";
  introVideo.currentTime = 0;
  introVideo.play();
}

introVideo.onended = () => {
  introVideo.style.display = "none";
  game.classList.remove("hidden");
  startGame();
};

/* GAME */
function startGame(){
  playing = true;
  gameMusic.currentTime = 0;
  gameMusic.play();
}

/* SIMPLE LOSE DEMO (tap screen) */
game.addEventListener("click", () => {
  if(!playing) return;
  gameOver();
});

function gameOver(){
  playing = false;
  gameMusic.pause();
  game.classList.add("hidden");
  end.classList.remove("hidden");
}
</script>

</body>
</html>
