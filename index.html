<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Game</title>
<style>
  /* --- RESET & BASIC SETUP --- */
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:Arial,sans-serif;background:#fff;color:#000;overflow:hidden;}
  .screen{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:20px;}
  .hidden{display:none !important;}
  
  /* --- BUTTONS --- */
  button{padding:16px 36px;font-size:1.2rem;border:none;border-radius:14px;cursor:pointer; transition: transform 0.2s;}
  #yesBtn{background:#ff5fa2;color:#fff;}
  #noBtn{background:#444;color:#fff;}
  .buttons{display:flex;gap:20px;margin-top:30px;}
  
  /* --- GAME ELEMENTS --- */
  #game{justify-content:flex-start;}
  #title{margin-top:20px;font-size:1.3rem;font-weight:bold;}
  #ground{position:absolute;bottom:80px;width:100%;height:4px;background:#aaa;}
  
  /* CHARACTERS */
  #jerry{position:absolute;bottom:80px;left:40px;width:60px; z-index: 2;}
  .obstacle{position:absolute;bottom:80px;width:20px;height:60px;background:#ff5fa2;}
  
  /* FINISH WALL */
  #finish{position:absolute;bottom:80px;right:40px;width:6px;height:90px;background:black;}
  #finishText{position:absolute;bottom:180px;right:20px;font-weight:bold;}

  /* --- GOJO & ANIMATION STYLES --- */
  #gojo {
    position: absolute;
    bottom: 80px;
    right: -300px; /* Starts off-screen */
    width: 140px;
    z-index: 3;
    /* THIS MAKES IT SLIDE SMOOTHLY */
    transition: right 1.5s cubic-bezier(0.25, 0.8, 0.25, 1); 
  }

  #purple {
    position: absolute;
    width: 40px;
    height: 40px;
    background: purple;
    border-radius: 50%;
    filter: blur(4px);
    box-shadow: 0 0 20px 10px rgba(128, 0, 128, 0.7);
    z-index: 4;
    display: none; /* Hidden until thrown */
  }

</style>
</head>
<body>

<div id="start" class="screen">
  <h2>Do you accept your bf is always right in every argument and you wanna be his Valentine üòº‚ù§Ô∏è</h2>
  <div class="buttons">
    <button id="yesBtn">YES</button>
    <button id="noBtn">NO</button>
  </div>
</div>

<div id="game" class="screen hidden">
  <div id="title">RUN LITTLE MOUSE RUN</div>
  <img id="jerry" src="jerry.png">
  <div id="ground"></div>
</div>

<img id="gojo" src="gojo.png">
<div id="purple"></div>

<div id="end" class="screen hidden"></div>

<script>
const start = document.getElementById('start');
const game = document.getElementById('game');
const end = document.getElementById('end');
const yesBtn = document.getElementById('yesBtn');
const noBtn = document.getElementById('noBtn');
const jerry = document.getElementById('jerry');
const gojo = document.getElementById('gojo');
const purple = document.getElementById('purple');

let noCount=0, y=0, vy=0, obstacles=[], passed=0, playing=false;
let gameInterval, loopId, purpleInterval;

// --- YES BUTTON (Instant Win) ---
yesBtn.onclick = () => {
  start.classList.add('hidden');
  end.classList.remove('hidden');
  end.innerHTML="<h2>You are successfully appointed as Valentine of Mr Ishit üòö‚ù§Ô∏è</h2>";
};

// --- NO BUTTON (Shrink/Grow logic) ---
noBtn.onclick = () => {
  noCount++;
  noBtn.style.transform = `scale(${Math.max(0.2,1-noCount*0.06)})`;
  yesBtn.style.transform = `scale(${1+noCount*0.08})`;
  if(noCount>=14){
    start.classList.add('hidden');
    game.classList.remove('hidden');
    startGame();
  }
};

// --- START GAME ---
function startGame(){
  playing=true;
  gameInterval=setInterval(spawnObstacle,1500); // Spawn every 1.5s
  loopId=requestAnimationFrame(loop);
}

function spawnObstacle(){
  if(!playing) return;
  const o = document.createElement('div');
  o.className = 'obstacle';
  o.style.left = '100%';
  game.appendChild(o);
  obstacles.push(o);
}

// --- GAME LOOP ---
function loop(){
  if(!playing) return;
  
  // Gravity
  vy -= 0.6;
  y += vy;
  if(y<0){y=0; vy=0;}
  jerry.style.bottom = 80+y+'px';

  // Move Obstacles
  obstacles.forEach((o,i)=>{
    // Move left by 5px
    let currentLeft = o.offsetLeft;
    o.style.left = (currentLeft-5)+'px';

    // Collision Check (Jerry is at left 40px, width 60px)
    if(currentLeft < 90 && currentLeft > 40 && y<50){
        // Hit obstacle -> Just restart logic or ignore? 
        // For this specific request, we usually just restart, 
        // but let's just show end buttons to save time
        showFinalOptions();
    }

    // Remove if off screen
    if(currentLeft<-30){
        o.remove(); 
        obstacles.splice(i,1); 
        passed++; 
        // WIN CONDITION: 14 obstacles passed
        if(passed===14) finish();
    }
  });

  loopId=requestAnimationFrame(loop);
}

// Jump
game.onclick = ()=>{if(playing && y===0) vy=14;};

// --- FINISH SCENE (The Scripted Part) ---
function finish(){
  playing=false;
  clearInterval(gameInterval);
  cancelAnimationFrame(loopId);

  // 1. Show the "No I don't" Wall
  const f = document.createElement('div');
  f.id = 'finish';
  game.appendChild(f);
  
  const t = document.createElement('div');
  t.id = 'finishText';
  t.innerText="No I don't";
  game.appendChild(t);

  // 2. Trigger Gojo Slide after 0.5s
  setTimeout(slideGojoIn, 500);
}

function slideGojoIn(){
  // This changes the right property, CSS transition handles the smoothness
  gojo.style.right = '50px';
  
  // 3. Wait 1.5s after slide, then throw purple
  setTimeout(throwHollowPurple, 1500);
}

function throwHollowPurple(){
  // Reveal Purple Orb
  purple.style.display = 'block';
  // Position it at Gojo's hand (approx)
  let startX = window.innerWidth - 150; 
  let currentX = startX;
  purple.style.left = currentX + 'px';
  purple.style.bottom = '140px'; // Height of hand

  // Animate Orb Moving Left
  purpleInterval = setInterval(() => {
    currentX -= 15; // Speed of orb
    purple.style.left = currentX + 'px';

    // Check if it hits Jerry (Jerry is near left: 40px)
    if(currentX < 80){
      clearInterval(purpleInterval);
      purple.style.display = 'none'; // Hide orb
      // 4. BLAST -> Show End Screen
      showFinalOptions();
    }
  }, 16);
}

// --- FINAL SCREEN ---
function showFinalOptions(){
  playing=false;
  clearInterval(gameInterval);
  clearInterval(purpleInterval);
  if(loopId) cancelAnimationFrame(loopId);

  game.classList.add('hidden');
  gojo.style.right = '-300px'; // Reset Gojo
  purple.style.display = 'none';

  end.classList.remove('hidden');
  end.innerHTML = `<h2>Do you now accept your bf is always right in every argument and wanna be his Valentine üòº‚ù§Ô∏è</h2>
  <div class="buttons">
    <button onclick="finalYes()" style="background:#ff5fa2;color:#fff;">YES</button>
    <button onclick="restartGame()" style="background:#444;color:#fff;">RESTART</button>
  </div>`;
}

// Helper for the dynamic HTML buttons
window.finalYes = function(){
    end.innerHTML="<h2>You are successfully appointed as Valentine of Mr Ishit üòö‚ù§Ô∏è</h2>";
}

window.restartGame = function(){
  end.classList.add('hidden');
  game.classList.remove('hidden');
  
  // Cleanup old game state
  obstacles.forEach(o=>o.remove()); obstacles=[];
  passed=0; y=0; vy=0;
  
  const finishEl = document.getElementById('finish');
  if(finishEl) finishEl.remove();
  const finishText = document.getElementById('finishText');
  if(finishText) finishText.remove();
  
  // Ensure Gojo is reset
  gojo.style.right='-300px'; 
  
  startGame();
}
</script>
</body>
</html>
